<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>DataTable Column Toggle</title>
	</h:head>
		
	<h:body>
			<p:dataTable id="cars" var="car" value="#{basicView.cars}" 
						scrollWidth="600px;" 
						scrollable="true">
			    <f:facet name="header">
			    	<div style="height:34px;">
				        List of Cars
				        <p:commandButton id="toggler" value="Columns" style="float:right;" icon="ui-icon-calculator" />
				        <p:columnToggler datasource="cars" trigger="toggler">
				        	<p:ajax event="toggle" listener="#{basicView.teste()}" update="cars" onstart="console.log('chamou...')"/>
				        </p:columnToggler>
			        </div>
			    </f:facet>
			 
			    <p:column headerText="Id" visible="#{basicView.list[0]}" toggleable="false">
			        <h:outputText value="#{car.id}" />
			    </p:column>
			 
			    <p:column headerText="Year" visible="#{basicView.list[1]}" toggleable="false">
			        <h:outputText value="#{car.year}" />
			    </p:column>
			 
			    <p:column headerText="Brand" visible="#{basicView.list[2]}">
			        <h:outputText value="#{car.brand}" />
			    </p:column>
			 
			    <p:column headerText="Color" width="100px;" visible="#{basicView.list[3]}">
			        <h:outputText value="#{car.color}" />
			    </p:column>
			 
			    <p:column headerText="Price" visible="#{basicView.list[4]}" toggleable="false">
			        <h:outputText value="#{car.price}">
			            <f:convertNumber type="currency" currencySymbol="$" />
			        </h:outputText>
			    </p:column>
			    
			    <p:column headerText="Actions" width="180px;" visible="#{basicView.list[5]}" toggleable="false">
					<p:commandButton icon="fa fa-search"/>
					<p:commandButton icon="fa fa-info"/>
					<p:commandButton icon="fa fa-edit"/>
					<p:commandButton icon="fa fa-remove"/>
			    </p:column>
			    
			</p:dataTable>
	</h:body>
</html>